"use strict";(self.webpackChunkpwa_media_player=self.webpackChunkpwa_media_player||[]).push([[976],{4976:(N,g,a)=>{a.r(g),a.d(g,{VideoModule:()=>V});var m=a(6814),l=a(9500),t=a(9467),d=a(5861),y=a(6296),_=a(5563),C=a(5502),b=a(2758);let p=(()=>{class n{#n;#e;#t;#i;constructor(){this.#n=(0,t.f3M)(C.y),this.#e=(0,t.f3M)(_.M),this.#t=(0,t.f3M)(b.R),this.videos=(0,t.tdS)([]),this.#t.next$.subscribe(()=>{if("video"!==this.#t.activeMediaType)return;const e=this.#i?.nextSongId;e&&this.playNewSong(e)}),this.#t.prev$.subscribe(()=>{if("video"!==this.#t.activeMediaType)return;const e=this.#i?.prevSongId;e&&this.playNewSong(e)})}addNewFolder(){var e=this;return(0,d.Z)(function*(){const i=yield e.#n.pickNewDirectory("video");if(i.length){var r,o=!1,s=!1;try{for(var h,u=(0,y.Z)(i);o=!(h=yield u.next()).done;o=!1){let f=h.value;yield e.#e.saveMediaFilesInDb(f,"video")}}catch(f){s=!0,r=f}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(s)throw r}}}})()}addNewVideos(){var e=this;return(0,d.Z)(function*(){const i=yield e.#n.pickNewFiles("video");i.length&&(yield e.#e.saveMediaFilesInDb(i,"video"))})()}playNewSong(e){this.#t.activeMediaType="video",this.#t.newPlay$.next(e),this.#i=this.videos().find(i=>i.uuid===e),this.#t.paused_.set(!1)}setAllVideoMedia(){var e=this;return(0,d.Z)(function*(){const i=yield e.#e.getMediaFiles("video");i.forEach((o,s,r)=>{o.nextSongId=r[s+1]?.uuid,o.prevSongId=r[s-1]?.uuid}),e.videos.set(i)})()}static#o=this.\u0275fac=function(i){return new(i||n)};static#a=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var M=a(5487),P=a(8407);let T=(()=>{class n{#n=(0,t.f3M)(l.F0);#e=(0,t.f3M)(M.c);#t=(0,t.f3M)(p);onTabClick(e){this.#n.navigateByUrl(`video/${e}`)}onAddFolderBtnClick(){this.#t.addNewFolder().catch(e=>{e instanceof P.g&&e.showToUser&&this.#e.showAlert({message:e.message})})}onAddFilesBtnClick(){}static#i=this.\u0275fac=function(i){return new(i||n)};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-video-home"]],decls:21,vars:0,consts:[[1,"page-wrapper"],[1,"music-toolbar"],[1,"toolbar-title"],["activeid","videos",1,"tabs"],[3,"click"],["id","videos",1,"d-none"],["id","folders",1,"d-none"],["type","button",1,"add-folder-btn",3,"click"],["slot","start","src","assets/icons/add_folder.svg"],["type","button",1,"add-files-btn",3,"click"],["slot","start","src","assets/icons/add.svg"],[1,"page-content"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"section",1)(2,"span",2),t._uU(3,"Video"),t.qZA(),t.TgZ(4,"fluent-tabs",3)(5,"fluent-tab",4),t.NdJ("click",function(){return o.onTabClick("videos")}),t._uU(6,"All videos"),t.qZA(),t.TgZ(7,"fluent-tab",4),t.NdJ("click",function(){return o.onTabClick("folder")}),t._uU(8,"Video folders"),t.qZA(),t.TgZ(9,"fluent-tab-panel",5),t._uU(10," all videos. "),t.qZA(),t.TgZ(11,"fluent-tab-panel",6),t._uU(12," folders. "),t.qZA()(),t.TgZ(13,"fluent-button",7),t.NdJ("click",function(){return o.onAddFolderBtnClick()}),t._UZ(14,"img",8),t._uU(15," Add folder"),t.qZA(),t.TgZ(16,"fluent-button",9),t.NdJ("click",function(){return o.onAddFilesBtnClick()}),t._UZ(17,"img",10),t._uU(18," Add Files "),t.qZA()(),t.TgZ(19,"div",11),t._UZ(20,"router-outlet"),t.qZA()())},dependencies:[l.lC],styles:['section.music-toolbar[_ngcontent-%COMP%]{display:grid;grid-template:"title tabs . add-folder-btn add-files-btn" auto/auto auto 1fr auto auto;gap:10px;align-items:center}@media screen and (max-width: 768px){section.music-toolbar[_ngcontent-%COMP%]{grid-template:"title tabs" auto "add-folder-btn add-files-btn" auto/50% 50%}}section.music-toolbar[_ngcontent-%COMP%]   .toolbar-title[_ngcontent-%COMP%]{grid-area:title}section.music-toolbar[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{grid-area:tabs}@media screen and (max-width: 768px){section.music-toolbar[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{justify-self:end}}section.music-toolbar[_ngcontent-%COMP%]   fluent-button.add-folder-btn[_ngcontent-%COMP%]{grid-area:add-folder-btn}section.music-toolbar[_ngcontent-%COMP%]   fluent-button.add-files-btn[_ngcontent-%COMP%]{grid-area:add-files-btn}']})}return n})();var Z=a(7018);const w=(n,c)=>c.uuid;function F(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"fluent-card")(1,"header"),t._uU(2),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onPlayBtnClick(s.uuid))}),t._UZ(4,"img",2),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(2),t.Oqu(e.title),t.xp6(2),t.s9C("src",e.albumArt,t.LSH)}}function O(n,c){1&n&&t._UZ(0,"app-no-data",3)}let v=(()=>{class n{constructor(){this.playBtnClick=new t.vpe}onPlayBtnClick(e){this.playBtnClick.emit(e)}static#n=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-media-tiles"]],inputs:{mediaFiles:"mediaFiles"},outputs:{playBtnClick:"playBtnClick"},standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"card-wrapper"],["title","play","type","button",1,"card-img__btn",3,"click"],["title","video poster",3,"src"],["btn1Txt","","btn2Txt",""]],template:function(i,o){1&i&&(t.TgZ(0,"section",0),t.SjG(1,F,5,2,"fluent-card",null,w,!1,O,1,0),t.qZA()),2&i&&t.wJu(1,o.mediaFiles())},dependencies:[m.ez,Z.d],styles:[".card-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,200px);grid-template-rows:250px repeat(auto-fill,250px);height:100%;gap:15px}@media all and (max-width: 768px){.card-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,50% 50%);box-sizing:border-box;padding:10px}}.card-wrapper[_ngcontent-%COMP%]   fluent-card[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-size:15px;padding:10px}.card-wrapper[_ngcontent-%COMP%]   fluent-card[_ngcontent-%COMP%]   button.card-img__btn[_ngcontent-%COMP%]{background:transparent;border:0 none;width:100%;height:100%}.card-wrapper[_ngcontent-%COMP%]   fluent-card[_ngcontent-%COMP%]   button.card-img__btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.card-wrapper[_ngcontent-%COMP%]   fluent-card[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;column-gap:10px;padding:10px}.card-wrapper[_ngcontent-%COMP%]   app-no-data[_ngcontent-%COMP%]{grid-row:1/-1;grid-column:1/-1}"]})}return n})();const S=[{path:"",component:T,children:[{path:"videos",component:(()=>{class n{constructor(){this.videoSvc=(0,t.f3M)(p)}ngOnInit(){var e=this;return(0,d.Z)(function*(){yield e.videoSvc.setAllVideoMedia()})()}onPlayBtnClick(e){this.videoSvc.playNewSong(e)}static#n=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-videos"]],decls:1,vars:1,consts:[[3,"mediaFiles","playBtnClick"]],template:function(i,o){1&i&&(t.TgZ(0,"app-media-tiles",0),t.NdJ("playBtnClick",function(r){return o.onPlayBtnClick(r)}),t.qZA()),2&i&&t.Q6J("mediaFiles",o.videoSvc.videos)},dependencies:[v]})}return n})()},{path:"folder",component:(()=>{class n{static#n=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-folders"]],decls:2,vars:0,template:function(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"folders works!"),t.qZA())}})}return n})()},{path:"",redirectTo:"videos",pathMatch:"full"},{path:"**",component:a(3391).NotFoundPage}]}];let B=(()=>{class n{static#n=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#t=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(S),l.Bz]})}return n})(),V=(()=>{class n{static#n=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#t=this.\u0275inj=t.cJS({providers:[p],imports:[m.ez,B,v]})}return n})()}}]);